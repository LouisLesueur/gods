<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Mythologie</title>
<script type="text/javascript" src="js/vis-network.min.js"></script>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/global_tree.js"></script>

<link rel="stylesheet" href="css/bootstrap.css">
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="opencloseNav()">&times;</a>

  <h4 >Filtres relationnels</h4>
  <div id="family" class="form-check-inline">
  <ul>
    <li>
      <label class="form-check-label">
        Liens paternels:
        <input type='checkbox' name='edgesFilter' class="form-check-input" value='father' ></input>
      </label>
    </li>
    <li>
      <label class="form-check-label">
        Liens maternels:
        <input type='checkbox' name='edgesFilter' class="form-check-input" value='mom' ></input>
      </label>
    </li>
      <li>
      <label class="form-check-label">
        Unions:
        <input type='checkbox' name='edgesFilter' class="form-check-input" value='partner' ></input>
      </label>
    </li>
    </ul>
    </div>

    <h4>Liens politiques</h4>
    <div id="politics" class="form-check-inline" >
    <ul id="kingship">
    </ul>
    </div>
</div>

<div id="main">

  <span class="action" onclick="opencloseNav()">&#9776; Options</span>
  <span class="action" onclick="network.startSimulation()">&#9654; Start</span>
  <span class="action" onclick="network.stopSimulation()">&#9208; Stop </span>
  <div id="mynetwork"></div>
</div>

<script>
// NAVBAR ------------------------------------------------------------------------------------------------
function opencloseNav() {

  if (document.getElementById("mySidenav").style.width=="0px" || document.getElementById("mySidenav").style.width==""){
    document.getElementById("mySidenav").style.width = "250px";
    document.getElementById("main").style.marginLeft = "250px";
  } else {
    document.getElementById("mySidenav").style.width = "0px";
    document.getElementById("main").style.marginLeft= "0px";
  }
}



var kingship = document.getElementById('kingship');
for (city in cities) {
  var lab_li = document.createElement("li");
  var lab_city = document.createElement("label");
  lab_city.class = "form-check-label";
  lab_city.textContent = "Rois "+cities[city]+": "

  var lab_box = document.createElement("input");
  lab_box.type = "checkbox"
  lab_box.name = "edgesFilter"
  lab_box.class = "form-check-input"
  lab_box.value = "king_"+cities[city]


  lab_city.appendChild(lab_box)
  lab_li.appendChild(lab_city)
  kingship.appendChild(lab_li);
}

// ARBRE ----------------------------------------------------------------
var network;

const edgeFilters = document.getElementsByName('edgesFilter')
let nodeFilterValue = ''
  const edgesFilterValues = {
    mom: false,
    father: false,
    partner: false,
    king_AthÃ¨nes: false,
    king_Salamine: false,
  }

  var container = document.getElementById('mynetwork');

  var options = {

    nodes: {
      shape: 'dot',
      scaling: {
        min: 10,
        max: 30
      },
      font: {
        size: 12,
        face: 'Tahoma',
        color: '#ffffff'
      },
      borderWidth: 2,
    },
    edges: {
      color:{inherit:true},
      width: 0.15,
      smooth: {
        type: 'horizontal'
      }
    },
    interaction: {
      dragNodes: true,
      hideEdgesOnDrag: true,
      tooltipDelay: 200
    },

    physics: {
      stabilization: false,
      barnesHut: {
        gravitationalConstant: -80000,
        springConstant: 0.001,
        springLength: 200
      }
    },

    layout: {
      randomSeed: undefined,
      improvedLayout: false,
      clusterThreshold: 100,
      hierarchical: {
        enabled:false,
        levelSeparation: 150,
        nodeSpacing: 100,
        treeSpacing: 200,
        blockShifting: true,
        edgeMinimization: true,
        parentCentralization: true,
        direction: 'LR',        // UD, DU, LR, RL
        sortMethod: 'directed',  // hubsize, directed
        shakeTowards: 'leaves'  // roots, leaves
      }
    },
  };

  const generations = 5;

  const edgesFilter = (edge) => {
    return edgesFilterValues[edge.relation]
    }

  const edgesView = new vis.DataView(edges, { filter: edgesFilter })

  edgeFilters.forEach(filter => filter.addEventListener('change', (e) => {
      const { value, checked } = e.target
      edgesFilterValues[value] = checked
      edgesView.refresh()
    }))

  var data = {nodes:nodes, edges:edges};
  network = new vis.Network(container, { nodes: nodes, edges: edgesView }, options);
</script>

</body>
</html>
